
<app-party-menu></app-party-menu>

<div *ngIf="party">

  <h1>{{party.name}}</h1>

  <div class="content">
    <md-input-container class="full-width">
      <input mdInput [(ngModel)]="party.name" name="name" type="text" placeholder="Party Name">
    </md-input-container>

    <md-input-container class="full-width">
      <input mdInput [(ngModel)]="party.location.address" name="address" type="text" placeholder="Address">
    </md-input-container>

    <div class="flex">
      <md-input-container class="zip">
        <input mdInput [(ngModel)]="party.location.zip" name="zip" type="number" size="6" placeholder="Zip">
      </md-input-container>

      <md-input-container class="city">
        <input mdInput [(ngModel)]="party.location.city" name="city" type="text" placeholder="City">
      </md-input-container>
    </div>

    <div class="flex">
      <md-input-container class="date">
        <input mdInput [ngModel]="party.date | date:'yyyy-MM-dd'" name="date" type="date" placeholder="Party Date">
      </md-input-container>

      <md-input-container class="date">
        <input mdInput [ngModel]="party.date | date:'HH:mm'" name="time" type="time" placeholder="Party Time">
      </md-input-container>
    </div>
  </div>

  <h2>Gifts</h2>

  <md-list>

    <md-list-item class="flex">
      <div class="flex-container">
        <md-input-container>
          <input mdInput #newItemName name="newItemName" type="text" placeholder="Item">
        </md-input-container>
        <md-input-container>
          <input mdInput #newItemCount name="newItemCount" type="number" placeholder="Count">
        </md-input-container>
      </div>
      <button md-mini-fab (click)="addNewItem(newItemName.value, newItemCount.value); newItemName.value=''; newItemCount.value=''"><md-icon>add</md-icon>
      </button>
    </md-list-item>

    <md-list-item *ngFor="let item of party.items" class="flex">
      <div class="flex-container">
        <md-input-container>
          <input mdInput [(ngModel)]="item.name" type="text" placeholder="Name">
        </md-input-container>
        <md-input-container>
          <input mdInput [(ngModel)]="item.count" type="number" placeholder="Count">
        </md-input-container>
      </div>
      <button md-mini-fab (click)="removeItem(item);"><md-icon>remove</md-icon></button>
    </md-list-item>

  </md-list>

  <h2>Persons</h2>

  <md-list>

    <md-list-item class="flex">
      <div class="flex-container">
        <md-input-container>
          <input mdInput #newPersonNickname name="newPersonNickname" type="text" placeholder="Nickname">
        </md-input-container>
        <md-input-container>
          <input mdInput #newPersonEmail name="newPersonEmail" type="email" placeholder="Email">
        </md-input-container>
      </div>
      <button md-mini-fab (click)="addNewPerson(newPersonNickname.value, newPersonEmail.value); newPersonNickname.value=''; newPersonEmail.value=''">
        <md-icon>add</md-icon>
      </button>
    </md-list-item>

    <md-list-item *ngFor="let person of party.persons" class="flex">
      <div class="flex-container">
        <md-input-container>
          <input mdInput [(ngModel)]="person.nickname" type="text" placeholder="Nickname">
        </md-input-container>
        <md-input-container>
          <input mdInput [(ngModel)]="person.email" type="email" placeholder="Email">
        </md-input-container>
      </div>
      <button md-mini-fab (click)="removePerson(person);"><md-icon>remove</md-icon></button>
    </md-list-item>

  </md-list>

  <div class="controls">
    <button md-raised-button color="primary" (click)="saveParty()">Save Changes</button>
    <button md-raised-button color="warn" (click)="cancelParty()">Cancel Party</button>
  </div>

</div>
